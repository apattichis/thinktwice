# IFEval: Instruction-Following Evaluation Report

**Dataset:** ifeval  
**Generated:** 2026-02-07 20:17:12  
**Total Prompts:** 120  
**Total Instructions:** 184  
**Pipeline:** ThinkTwice (self-correcting pipeline)  

## 1. Executive Summary

IFEval tests whether models can follow specific formatting, structural, and content instructions. This evaluates ThinkTwice's constraint decomposition and iterative refinement capabilities.

| Metric | Value |
|--------|-------|
| **Prompt-Level Strict Accuracy** | 85.0% (102/120) |
| **Instruction-Level Strict Accuracy** | 89.7% (165/184) |
| **Prompt-Level Loose Accuracy** | 87.5% (105/120) |
| **Instruction-Level Loose Accuracy** | 91.3% (168/184) |
| **Mean Latency** | 82.0s |
| **P95 Latency** | 213.8s |

## 2. Methodology

### IFEval Metrics (per the original paper)

- **Prompt-level strict**: Prompt passes only if ALL instructions pass exactly
- **Instruction-level strict**: Percentage of individual instructions that pass exactly
- **Prompt-level loose**: Same but with 8 response transformations (strip markdown, trim lines, remove bookends)
- **Instruction-level loose**: Same with transformations

All verification is **deterministic** (no LLM judge). Each instruction type has a specific verifier that checks word counts, formatting, keywords, case, etc.

## 3. Pipeline Comparison

| Metric | Single-Shot | ThinkTwice | Delta |
|--------|-------------|------------|-------|
| **Prompt Strict Acc** | 71.7% | 85.0% | +13.3% |
| **Instr Strict Acc** | 79.9% | 89.7% | +9.8% |
| **Prompt Loose Acc** | 82.5% | 87.5% | +5.0% |
| **Instr Loose Acc** | 88.0% | 91.3% | +3.3% |
| **Mean Latency** | 17.5s | 82.0s | +64.5s |

![IFEval Comparison](charts/ifeval_comparison.png)

![Latency Comparison](charts/ifeval_latency.png)

### Statistical Significance (McNemar's Test)

- **Significant:** Yes (p < 0.05)
- **Chi-squared:** 10.2273
- **p-value:** 0.001384
- **Paired samples:** 120
- **Both correct:** 83
- **SS only correct:** 3
- **TT only correct:** 19
- **Both wrong:** 15

## 4. Per-Instruction-Type Breakdown

![Instruction Type Breakdown](charts/ifeval_types.png)

| Instruction Type | Strict Acc | Loose Acc | Count |
|-----------------|-----------|----------|-------|
| English Capital | 100% | 100% | 6 |
| English Lowercase | 100% | 100% | 2 |
| Repeat Prompt | 100% | 100% | 1 |
| Two Responses | 100% | 100% | 12 |
| Postscript | 100% | 100% | 8 |
| Constrained Response | 100% | 100% | 7 |
| Multiple Sections | 100% | 100% | 12 |
| Number Highlighted Sections | 100% | 100% | 1 |
| Existence | 100% | 100% | 12 |
| Frequency | 100% | 100% | 2 |
| Response Language | 100% | 100% | 8 |
| Nth Paragraph First Word | 100% | 100% | 12 |
| No Comma | 100% | 100% | 5 |
| Json Format | 90% | 90% | 10 |
| End Checker | 89% | 89% | 9 |
| Number Bullet Lists | 88% | 88% | 8 |
| Number Placeholders | 86% | 86% | 14 |
| Quotation | 86% | 86% | 7 |
| Title | 80% | 80% | 5 |
| Number Paragraphs | 80% | 93% | 15 |
| Capital Word Frequency | 76% | 76% | 17 |
| Forbidden Words | 67% | 100% | 3 |
| Letter Frequency | 67% | 67% | 3 |
| Number Words | 67% | 67% | 3 |
| Number Sentences | 0% | 0% | 2 |

## 5. Accuracy by Instruction Count

![Instruction Count Breakdown](charts/ifeval_counts.png)

| Instructions per Prompt | Strict Acc | Loose Acc | Count |
|------------------------|-----------|----------|-------|
| 1 | 96% | 97% | 68 |
| 2 | 70% | 72% | 40 |
| 3 | 75% | 83% | 12 |

## 6. Pipeline Analysis

### Gate Mechanism
- Total runs: 120
- Fast-path: 46 (38.3%)
- Average iterations: 1.0

### Constraint Satisfaction
- Total constraints: 690
- Satisfied: 220 (31.9%)

## 7. Latency Analysis

| Statistic | Value |
|-----------|-------|
| Mean | 82.0s |
| Median | 85.6s |
| P95 | 213.8s |
| Min | 14.1s |
| Max | 317.1s |

## 8. Discussion

ThinkTwice achieves **85.0%** prompt-level strict accuracy, a **+13.3 percentage point** improvement over single-shot (71.7%). This demonstrates that the iterative constraint-checking loop meaningfully improves instruction adherence -- the pipeline catches and corrects formatting violations that the base model misses on first pass.
